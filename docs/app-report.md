# Chest Tracker Correction Tool - Application Report

## Project Overview
The Chest Tracker Correction Tool is designed to read, process, and correct text input generated by an OCR app for the game "Total Battle". The application aims to fix OCR errors such as wrong characters and bad text encoding based on a correction list provided as a CSV file.

## Requirements Summary

### Core Functionality
- Read text input containing chest entries (chest type, player, source)
- Apply corrections based on a CSV template (exact string replacements)
- Support fuzzy matching for similar but not identical errors
- Implement a scoring system for error detection confidence (default: 0.85, configurable)
- Allow manual corrections and additions to the correction list
- Process multiple files while maintaining date-based organization
- Generate correction statistics and reports

### User Interface
- Modern, sleek UI using PySide6
- Dark blueish-purple theme with golden accents
- Left navigation bar with icons+text (dashboard style)
- Content area split horizontally:
  - Left panel (~1/3): Filters and options
  - Right panel (~2/3): Data view/table
- Preview mode for corrections (toggleable)
- Highlighting for errors and corrections

### Data Management
- Support for validation lists (players, chest types, sources)
- Import/export functionality for correction lists and validation lists (CSV format)
- Configuration management to remember user settings
- Multi-file batch processing with file integrity preservation
- Date-based file organization

## Implementation Plan

### Phase 1: Project Setup and Core Models
- Create project structure
- Design data models:
  - ChestEntry class (chest_type, player, source)
  - CorrectionRule class (from_text, to_text)
  - ValidationList class (type, entries)
- Implement configuration management (ConfigManager)
- Create file parsers:
  - TextParser for reading chest entries
  - CSVParser for correction lists
  - ImportExport utilities for lists

### Phase 2: Core Logic
- Implement exact string replacement correction logic
- Create fuzzy matching algorithm with configurable scoring (default: 0.85)
- Implement error detection based on validation lists
- Design batch processing system for multiple files
- Create statistics tracking for corrections

### Phase 3: UI Framework with PySide6
- Design main window with left navigation bar
- Split content area (1/3 for filters, 2/3 for data view)
- Create file loading interface for text and CSV
- Implement table view for chest entries with:
  - Filtering options
  - Grouping by field
  - Highlighting for errors
- Build preview mode with side-by-side comparison
- Design correction interface with batch operations

### Phase 4: Advanced Features
- Implement validation list management
- Create reporting system for correction statistics
- Build import/export functionality
- Add user-configurable settings
- Create help system and documentation

### Phase 5: Testing and Refinement
- Develop comprehensive test cases
- Create sample data files
- Test with various error scenarios
- Optimize performance
- Polish UI and fix issues

## Technology Stack
- Python 3.10+ for core logic
- PySide6 for the GUI (with dark blueish-purple theme with golden accents)
- FuzzyWuzzy or similar library for fuzzy matching
- ConfigParser for configuration management
- Python-csv for handling CSV files
- SQLite (optional) for more complex data storage needs
- Pathlib for file handling

## Project Structure
```
chest_tracker_correction_tool/
├── main.py                       # Entry point
├── config.ini                    # Configuration file
├── docs/                         # Documentation 
│   ├── app-report.md             # Project report
│   └── todo.mdc                  # Task tracking
├── src/
│   ├── models/                   # Data models
│   │   ├── __init__.py
│   │   ├── chest_entry.py        # ChestEntry model
│   │   ├── correction_rule.py    # CorrectionRule model
│   │   └── validation_list.py    # ValidationList model
│   ├── services/                 # Business logic
│   │   ├── __init__.py
│   │   ├── config_manager.py     # Configuration management
│   │   ├── file_parser.py        # File parsing
│   │   ├── corrector.py          # Correction logic
│   │   └── fuzzy_matcher.py      # Fuzzy matching
│   ├── ui/                       # User interface
│   │   ├── __init__.py
│   │   ├── main_window.py        # Main application window
│   │   ├── navigation_panel.py   # Left navigation panel
│   │   ├── file_panel.py         # File loading panel
│   │   ├── corrector_panel.py    # Correction panel
│   │   ├── validation_panel.py   # Validation list management
│   │   ├── table_model.py        # Custom table model
│   │   └── styles.py             # UI styling
│   └── utils/                    # Utilities
│       ├── __init__.py
│       ├── constants.py          # Application constants
│       └── helpers.py            # Helper functions
└── tests/                        # Test directory
    ├── __init__.py
    ├── test_models.py
    ├── test_services.py
    ├── test_corrector.py
    └── sample_data/              # Test data
        ├── input_samples/        # Sample input files
        └── correction_samples/   # Sample correction lists
```

## UI Design Specifics

### Color Scheme
- Main color: Dark blueish-purple
- Accent color: Bright gold
- Text: White/light gray on dark background

### Layout
- **Navigation Bar**: Left side, vertical, with icons+text
- **Content Area**:
  - Left panel (~1/3): Configuration options, filters
  - Right panel (~2/3): Data table/view
- **Table View**: 
  - Highlighting for errors/corrections
  - Sortable columns
  - Filtering controls

### Functionality Breakdown
- **File Management**:
  - Load single/multiple text files
  - Import/export correction lists
  - Import/export validation lists
- **Correction Options**:
  - Apply correction list
  - Apply fuzzy matching
  - Manual corrections
  - Batch corrections
- **Validation**:
  - Toggle validation on/off
  - Edit validation lists
  - Import/export validation lists
- **Preview**:
  - Toggle between raw and corrected view
  - Side-by-side comparison
- **Reporting**:
  - Correction statistics
  - Entry counts (players, chest types, etc.)
  - Log file generation

## Configuration Options
- Fuzzy matching threshold (default: 0.85)
- Validation toggle (on/off)
- UI theme settings
- Default directories
- Preview mode preferences

## Statistics and Reporting
- Count of corrected entries
- Total entries statistics (players, chests, sources)
- Report presentation in UI
- Text log file generation

